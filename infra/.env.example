# Valence Pod Environment Variables
# Copy to .env.pod and fill in values before running deploy.sh
# DO NOT commit .env.pod - it contains secrets!
#
# Usage:
#   cp .env.example .env.pod
#   # Edit .env.pod with your values
#   source .env.pod
#   ./deploy.sh

# =============================================================================
# INFRASTRUCTURE
# =============================================================================

# Droplet IP address (set after creating the droplet)
export VALENCE_POD_IP="YOUR_SERVER_IP"

# Domain name for your pod (must point to VALENCE_POD_IP)
export VALENCE_DOMAIN="your.domain.com"

# Email for Let's Encrypt SSL certificate notifications
export LETSENCRYPT_EMAIL="your@email.com"

# =============================================================================
# SSH CONFIGURATION
# Choose ONE of these options:
# =============================================================================

# Option 1: Path to your SSH public key file (RECOMMENDED)
export VALENCE_SSH_PUBKEY_FILE="$HOME/.ssh/valence_pod.pub"

# Option 2: Inline SSH public key content
# export VALENCE_SSH_PUBKEY="ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAA... user@host"

# =============================================================================
# DATABASE SECRETS
# Generate with: openssl rand -base64 32
# =============================================================================

export VALENCE_DB_PASSWORD="$(openssl rand -base64 32)"

# =============================================================================
# MATRIX/SYNAPSE SECRETS
# Generate each with: openssl rand -base64 32
# =============================================================================

# Password for the Matrix bot user (valence-bot)
export VALENCE_BOT_PASSWORD="$(openssl rand -base64 32)"

# Password for the Synapse admin user
export SYNAPSE_ADMIN_PASSWORD="$(openssl rand -base64 32)"

# Synapse internal secrets (must be consistent across deploys)
export SYNAPSE_REGISTRATION_SECRET="$(openssl rand -base64 32)"
export SYNAPSE_MACAROON_SECRET="$(openssl rand -base64 32)"
export SYNAPSE_FORM_SECRET="$(openssl rand -base64 32)"

# =============================================================================
# API KEYS
# NEVER commit these values!
# =============================================================================

# OpenAI API key for embeddings (required)
export OPENAI_API_KEY="sk-your-api-key-here"

# Anthropic API key (optional, for future use)
# export ANTHROPIC_API_KEY="sk-ant-your-api-key-here"

# =============================================================================
# OAUTH CONFIGURATION (for Claude mobile/web)
# =============================================================================

# Password for OAuth authorization (required for OAuth support)
export VALENCE_OAUTH_PASSWORD="$(openssl rand -base64 32)"

# =============================================================================
# DIGITALOCEAN SPACES (for backups)
# Optional but recommended for disaster recovery
# =============================================================================

# DigitalOcean Spaces access key
# export DO_SPACES_KEY="your-spaces-access-key"

# DigitalOcean Spaces secret key
# export DO_SPACES_SECRET="your-spaces-secret-key"

# Bucket name for backups
# export DO_SPACES_BUCKET="valence-backups"

# Region (default: nyc3)
# export DO_SPACES_REGION="nyc3"

# =============================================================================
# OPTIONAL: ANSIBLE CONFIGURATION
# =============================================================================

# SSH private key for Ansible (if different from default)
# export ANSIBLE_PRIVATE_KEY_FILE="$HOME/.ssh/valence_pod"

# Disable host key checking (useful for new droplets)
# export ANSIBLE_HOST_KEY_CHECKING=False
